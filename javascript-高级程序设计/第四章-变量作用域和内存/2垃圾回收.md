# 垃圾回收

javascript 使用的是垃圾回收的语言，就是执行环境负责在代码执行时管理内存。在 javascript 中，会通过自动内存管理实现内存分配和闲置资源回收。

> 确定哪个变量不会再使用，然后释放它占用的内存。这个过程是周期性的。垃圾回收程序每隔一定时间（在代码执行过程中某个预定的收集时间）就会自动运行。

比如函数中局部变量的正常生命周期：

- 函数中哥的局部变量会在函数执行时存在
- 此时栈（堆）内存会分配空间去保存相应的值
- 函数在内部使用的便利，然后退出
- 之后就不再需要那个局部变量了，它占用的内存可以释放掉，供后面的使用
- 垃圾回收机制需要去跟踪记录哪个变量还会使用，以及哪个变了不会再使用，以便回收内存
- 如何标记未使用的变量也许有不同的实现方式

下面介绍两种主要的标记策略：`标记清除`和`引用计数`。

## 标记清除

javascript 最常用的垃圾回收策略是标记清除

1. 当一个变量进入上下文，比如在函数内部声明一个变量时，这个变量会被加上存在于上下文的标记
2. 在上下文中的变量。逻辑上讲，永远不应该释放他们的内存，因为只要有上下文中的代码在运行，就有可能用到它们
3. 当变量离开上下文时也会被加上离开上下文的标记
